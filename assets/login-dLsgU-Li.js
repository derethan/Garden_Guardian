import{g as w,f as C,s as v,_ as h,e as p,h as L,k as S,j as s,l as A,m as k,c as x,u as b,a as j,L as T,T as u,G as g,n as F,B as D}from"./index-DgPKFDUi.js";import{u as E}from"./useValidate-5EuVXFeW.js";import{T as f}from"./TextField-WLzpe7gt.js";import{P}from"./PrimaryButton-nDPij5tt.js";import{D as W}from"./DontHaveAccountLink-UaTD7FKH.js";import{a as R,C as U}from"./Container-fmQkMicZ.js";import{C as y}from"./CardContent-Tp8Pienh.js";import{L as M}from"./LandingSiteNav-UvhvoViV.js";import"./Select-chzrtoZE.js";import"./Button-58lOTcEH.js";function N(e){return w("MuiCardActions",e)}C("MuiCardActions",["root","spacing"]);const B=["disableSpacing","className"],I=e=>{const{classes:t,disableSpacing:a}=e;return k({root:["root",!a&&"spacing"]},N,t)},_=v("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,!a.disableSpacing&&t.spacing]}})(({ownerState:e})=>h({display:"flex",alignItems:"center",padding:8},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),q=p.forwardRef(function(t,a){const r=L({props:t,name:"MuiCardActions"}),{disableSpacing:l=!1,className:n}=r,d=S(r,B),c=h({},r,{disableSpacing:l}),m=I(c);return s.jsx(_,h({className:A(m.root,n),ownerState:c,ref:a},d))}),z=q;function G(){const[e,t]=p.useState({email:"",password:""}),[a,r]=E(e),l=x(),n=b();return{loginData:e,formErrors:a,handleChange:i=>{t({...e,[i.target.name]:i.target.value})},handleSubmit:async i=>{if(i.preventDefault(),r())try{const o=await l.loginAction(e);if(o)if(o.status===201)n("/dashboard");else throw new Error(o.message);else throw new Error("503 Service Unavailable")}catch(o){console.error(o)}},handleDemoLogin:async i=>{try{const o=await l.loginAction(i);if(o)if(o.status===201)n("/dashboard");else throw new Error(o.message);else throw new Error("503 Service Unavailable")}catch(o){console.error(o)}}}}const V=({loginData:e,formErrors:t,handleChange:a})=>s.jsxs(s.Fragment,{children:[s.jsx(f,{required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",margin:"normal",color:"primary",size:"small",variant:"outlined",sx:{backgroundColor:"background.default","& input:-webkit-autofill":{WebkitTextFillColor:"black"}},onChange:a,value:e.email,error:!!t.email,helperText:t.email}),s.jsx(f,{required:!0,fullWidth:!0,id:"password",label:"Password",name:"password",type:"password",margin:"normal",variant:"outlined",size:"small",sx:{backgroundColor:"background.default","& input:-webkit-autofill":{WebkitTextFillColor:"black"}},onChange:a,value:e.password,error:!!t.password,helperText:t.password})]}),$=()=>{const e=j();return s.jsx(T,{to:"/passwordReset",children:s.jsx(u,{variant:"body2",color:e.typography.primary.textDark,sx:{"&:hover":{color:e.typography.primary.main}},children:"Forgot password?"})})},H=()=>s.jsxs(z,{sx:{justifyContent:"center",flexDirection:"column",gap:4},children:[s.jsx(P,{type:"submit",text:"Login",fullWidth:!0}),s.jsxs(g,{container:!0,spacing:2,children:[s.jsx(g,{item:!0,xs:6,children:s.jsx($,{})}),s.jsx(g,{item:!0,xs:6,children:s.jsx(W,{})})]})]}),J=()=>{const{loginData:e,formErrors:t,handleChange:a,handleSubmit:r,handleDemoLogin:l}=G(),{postStatus:n,postMessage:d}=x(),c=j(),m=F(),o=new URLSearchParams(m.search).get("demo");return p.useEffect(()=>{o&&l({email:"demo",password:"demo"})},[]),s.jsxs(R,{variant:"light",sx:{padding:2},children:[s.jsxs(y,{children:[s.jsx(u,{variant:"h4",color:c.typography.primary.cardTitle,sx:{fontWeight:600},children:"Sign In"}),s.jsx(u,{variant:"subtitle2",color:c.typography.primary.subtitle,sx:{paddingTop:"8px"},children:"Enter your login details to proceed"})]}),s.jsxs(D,{type:"form",component:"form",noValidate:!0,onSubmit:r,children:[s.jsx(V,{loginData:e,formErrors:t,handleChange:a}),n&&n!==201&&s.jsx(y,{children:s.jsx(u,{variant:"body1",color:"error",children:d})}),s.jsx(H,{})]})]})},K=J;function ns(){const{isLoggedIn:e}=x(),t=b();return p.useEffect(()=>{e&&t("/dashboard")},[e,t]),s.jsxs(s.Fragment,{children:[s.jsx(M,{}),s.jsx(U,{maxWidth:"sm",sx:{paddingTop:4},children:s.jsx(K,{})})]})}export{ns as default};
