import{e as l,j as e,T as t,B as c,c as x}from"./index-fXEaP3-y.js";import{a as p}from"./Container-rVm9oZQp.js";const h="/Garden_Guardian/assets/videoPlaceholder-Y7YWToIT.png";function u(){const r="https://24.137.88.137:443/";async function n(a,o){const i=a&&o?`sensors/readSensor/latest?device_id=${a}&measurement=${o}`:`sensors/readSensor/latest/all?device_id=${a}`;try{const s=await fetch(r+i,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!s.ok)throw new Error("There was an error checking for device");return await s.json()}catch(s){throw console.error("There was an error checking for device: ",s),s}}return{getLatestReading:n}}const m=({deviceID:r,deviceStatus:n})=>{const{getLatestReading:a}=u(),[o,i]=l.useState("Loading...");return l.useEffect(()=>{(async()=>{const d=await a(r,"Device Temperature");i(d.value)})()},[]),e.jsxs(e.Fragment,{children:[e.jsx(t,{variant:"h6",color:"text.primary",fontWeight:"bold",children:"Active Device"}),e.jsxs(p,{variant:"light",sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"1rem",marginTop:"1rem",borderRadius:"15px"},children:[e.jsx("img",{src:h,alt:"Camera feed",style:{width:"100%"}}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",paddingTop:"1rem"},children:[e.jsx(t,{variant:"body",color:"text.primary",fontWeight:"bold",children:"Device:"}),e.jsx(t,{variant:"body1",color:"text.secondary",children:r})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(t,{variant:"body",color:"text.secondary",children:"Temperature:"}),e.jsxs(t,{variant:"body1",color:"text.primary",children:[o," Â°C"]})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(t,{variant:"subtext",color:"text.secondary",children:"Status:"}),e.jsx(t,{variant:"body1",color:n==="online"?"green":"red",children:n})]})]})]})},g=()=>{const{deviceID:r,deviceStatus:n}=x();return e.jsx(p,{variant:"light",sx:{display:"flex",flexDirection:"column",justifyContent:"flex-start",padding:"1rem",height:"100%"},children:e.jsx(m,{deviceID:r,deviceStatus:n})})};export{g as S,u};
