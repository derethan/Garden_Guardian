import{j as a,B as n,T as o,u as m,a as v,f as p,p as w,b as y,q as N,e as C,C as P}from"./index-pZlVVNNX.js";import{u as T}from"./useValidate-kEzTiDM8.js";import{T as i}from"./TextField-B8uDiUZB.js";import{L as k}from"./LoginLink-Eo1XqqTL.js";import{L as F}from"./LandingSiteNav-VKT76gV5.js";const L=({formData:t,formErrors:e,handleChange:s})=>a.jsx(a.Fragment,{children:a.jsxs(n,{sx:{display:"flex",flexDirection:"column",gap:2,padding:2},children:[a.jsx(i,{required:!0,label:"First Name",name:"firstName",id:"firstName",variant:"outlined",size:"small",sx:{backgroundColor:"background.default"},value:t.firstName,onChange:s,error:!!e.firstName,helperText:e.firstName}),a.jsx(i,{required:!0,label:"Last Name",name:"lastName",id:"lastName",variant:"outlined",size:"small",sx:{backgroundColor:"background.default"},value:t.lastName,onChange:s,error:!!e.lastName,helperText:e.lastName}),a.jsx(i,{label:"Email",type:"email",name:"email",id:"email",variant:"outlined",size:"small",sx:{backgroundColor:"background.default"},value:t.email,onChange:s,error:!!e.email,helperText:e.email})]})}),R=({formData:t,formErrors:e,handleChange:s})=>a.jsxs(a.Fragment,{children:[a.jsx(o,{variant:"subtitle1",color:"text.card",children:"Password Details"}),a.jsxs(n,{sx:{display:"flex",gap:2,padding:2},children:[a.jsx(i,{label:"Password",type:"password",name:"password",id:"password",variant:"outlined",size:"small",sx:{backgroundColor:"background.default"},value:t.password,onChange:s,error:!!e.password,helperText:e.password}),a.jsx(i,{label:"Confirm Password",type:"password",name:"confirmPassword",id:"confirmPassword",variant:"outlined",size:"small",sx:{backgroundColor:"background.default"},value:t.confirmPassword,onChange:s,error:!!e.confirmPassword,helperText:e.confirmPassword})]})]}),z=()=>{const t=m(),e=v(),[s,l]=p.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),[d,x]=T(s),[g,f,,h,j]=w(),u=r=>{l({...s,[r.target.name]:r.target.value}),r.target.name==="email"&&h("")},b=async r=>{if(r.preventDefault(),x()){const c=await j("https://api.gardenguardian.app:8443/"+"users/register",s);c&&(console.log("register status: ",c),l({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),t("/login"))}else console.log("Form is invalid")};return a.jsxs(y,{variant:"light",sx:{padding:2,margin:2},children:[a.jsx(o,{variant:"h4",color:e.typography.primary.cardTitle,sx:{fontWeight:600},children:"Create Account"}),a.jsx(o,{variant:"subtitle2",color:e.typography.primary.subtitle,sx:{paddingTop:"8px"},children:"Enter your details to create an account"}),a.jsxs(n,{component:"form",noValidate:!0,autoComplete:"off",onSubmit:b,children:[a.jsx(L,{formData:s,formErrors:d,handleChange:u}),g===409&&a.jsx(o,{variant:"body1",color:"error",children:f}),a.jsx(R,{formData:s,formErrors:d,handleChange:u}),a.jsx(n,{children:a.jsx(N,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",sx:{mt:3,mb:2},children:"Register Account"})}),a.jsx(k,{})]})]})},S=z;function M(){const t=C(),e=m();return p.useEffect(()=>{t.isLoggedIn&&e("/dashboard")},[]),a.jsxs(a.Fragment,{children:[" ",a.jsx(F,{}),a.jsx(P,{maxWidth:"sm",sx:{paddingTop:4},children:a.jsx(S,{})})]})}export{M as default};
