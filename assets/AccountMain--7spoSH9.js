import{k as R,ay as fe,az as me,_ as g,R as te,aA as ge,f as W,g as F,P as T,j as o,s as E,V as ne,O as M,$ as G,Z as V,e as v,I as he,l as oe,m as H,M as N,a5 as B,aB as xe,ar as X,ax as ve,h as se,a as re,a4 as Ce,aC as we,B as I,T as k,G as O,D as ye,c as ae,o as be,p as Se,a9 as ke}from"./index-DOCx13aA.js";import{C as _,a as je}from"./Container-UZy3Sk2T.js";import{P as ie}from"./PrimaryButton-XqV8TuRd.js";import{u as Pe}from"./useValidate-cHK8ELbJ.js";import{T as Z}from"./TextField-yCetIh5h.js";import{c as Ee}from"./index-RCtCVgaz.js";import{C as Ae}from"./Close-yDQ9pPFd.js";import"./Button-aYOn8pPj.js";import"./Select-ltpg3IOG.js";const Re=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],Me=["component","slots","slotProps"],Oe=["component"];function q(e,t){const{className:s,elementType:n,ownerState:a,externalForwardedProps:d,getSlotOwnerState:u,internalForwardedProps:m}=t,p=R(t,Re),{component:h,slots:f={[e]:void 0},slotProps:x={[e]:void 0}}=d,b=R(d,Me),y=f[e]||n,l=fe(x[e],a),c=me(g({className:s},p,{externalForwardedProps:e==="root"?b:void 0,externalSlotProps:l})),{props:{component:C},internalRef:r}=c,i=R(c.props,Oe),w=te(r,l==null?void 0:l.ref,t.ref),S=u?u(i):{},j=g({},a,S),A=e==="root"?C||h:C,P=ge(y,g({},e==="root"&&!h&&!f[e]&&m,e!=="root"&&!f[e]&&m,i,A&&{as:A},{ref:w}),j);return Object.keys(S).forEach(L=>{delete P[L]}),[y,P]}function Le(e){return F("MuiAlert",e)}const Ie=W("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),K=Ie,Te=T(o.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),ze=T(o.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),De=T(o.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),$e=T(o.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),Be=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],Ne=Ee(),We=e=>{const{variant:t,color:s,severity:n,classes:a}=e,d={root:["root",`color${M(s||n)}`,`${t}${M(s||n)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return H(d,Le,a)},Fe=E(ne,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.variant],t[`${s.variant}${M(s.color||s.severity)}`]]}})(({theme:e})=>{const t=e.palette.mode==="light"?G:V,s=e.palette.mode==="light"?V:G;return g({},e.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(([,n])=>n.main&&n.light).map(([n])=>({props:{colorSeverity:n,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${n}Color`]:t(e.palette[n].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${n}StandardBg`]:s(e.palette[n].light,.9),[`& .${K.icon}`]:e.vars?{color:e.vars.palette.Alert[`${n}IconColor`]}:{color:e.palette[n].main}}})),...Object.entries(e.palette).filter(([,n])=>n.main&&n.light).map(([n])=>({props:{colorSeverity:n,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${n}Color`]:t(e.palette[n].light,.6),border:`1px solid ${(e.vars||e).palette[n].light}`,[`& .${K.icon}`]:e.vars?{color:e.vars.palette.Alert[`${n}IconColor`]}:{color:e.palette[n].main}}})),...Object.entries(e.palette).filter(([,n])=>n.main&&n.dark).map(([n])=>({props:{colorSeverity:n,variant:"filled"},style:g({fontWeight:e.typography.fontWeightMedium},e.vars?{color:e.vars.palette.Alert[`${n}FilledColor`],backgroundColor:e.vars.palette.Alert[`${n}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[n].dark:e.palette[n].main,color:e.palette.getContrastText(e.palette[n].main)})}))]})}),He=E("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),_e=E("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),Y=E("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),Q={success:o.jsx(Te,{fontSize:"inherit"}),warning:o.jsx(ze,{fontSize:"inherit"}),error:o.jsx(De,{fontSize:"inherit"}),info:o.jsx($e,{fontSize:"inherit"})},Ue=v.forwardRef(function(t,s){const n=Ne({props:t,name:"MuiAlert"}),{action:a,children:d,className:u,closeText:m="Close",color:p,components:h={},componentsProps:f={},icon:x,iconMapping:b=Q,onClose:y,role:l="alert",severity:c="success",slotProps:C={},slots:r={},variant:i="standard"}=n,w=R(n,Be),S=g({},n,{color:p,severity:c,variant:i,colorSeverity:p||c}),j=We(S),A={slots:g({closeButton:h.CloseButton,closeIcon:h.CloseIcon},r),slotProps:g({},f,C)},[P,L]=q("closeButton",{elementType:he,externalForwardedProps:A,ownerState:S}),[z,D]=q("closeIcon",{elementType:Ae,externalForwardedProps:A,ownerState:S});return o.jsxs(Fe,g({role:l,elevation:0,ownerState:S,className:oe(j.root,u),ref:s},w,{children:[x!==!1?o.jsx(He,{ownerState:S,className:j.icon,children:x||b[c]||Q[c]}):null,o.jsx(_e,{ownerState:S,className:j.message,children:d}),a!=null?o.jsx(Y,{ownerState:S,className:j.action,children:a}):null,a==null&&y?o.jsx(Y,{ownerState:S,className:j.action,children:o.jsx(P,g({size:"small","aria-label":m,title:m,color:"inherit",onClick:y},L,{children:o.jsx(z,g({fontSize:"small"},D))}))}):null]}))}),Ge=Ue;function J(e){return e.substring(2).toLowerCase()}function Ve(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function Xe(e){const{children:t,disableReactTree:s=!1,mouseEvent:n="onClick",onClickAway:a,touchEvent:d="onTouchEnd"}=e,u=v.useRef(!1),m=v.useRef(null),p=v.useRef(!1),h=v.useRef(!1);v.useEffect(()=>(setTimeout(()=>{p.current=!0},0),()=>{p.current=!1}),[]);const f=te(t.ref,m),x=N(l=>{const c=h.current;h.current=!1;const C=B(m.current);if(!p.current||!m.current||"clientX"in l&&Ve(l,C))return;if(u.current){u.current=!1;return}let r;l.composedPath?r=l.composedPath().indexOf(m.current)>-1:r=!C.documentElement.contains(l.target)||m.current.contains(l.target),!r&&(s||!c)&&a(l)}),b=l=>c=>{h.current=!0;const C=t.props[l];C&&C(c)},y={ref:f};return d!==!1&&(y[d]=b(d)),v.useEffect(()=>{if(d!==!1){const l=J(d),c=B(m.current),C=()=>{u.current=!0};return c.addEventListener(l,x),c.addEventListener("touchmove",C),()=>{c.removeEventListener(l,x),c.removeEventListener("touchmove",C)}}},[x,d]),n!==!1&&(y[n]=b(n)),v.useEffect(()=>{if(n!==!1){const l=J(n),c=B(m.current);return c.addEventListener(l,x),()=>{c.removeEventListener(l,x)}}},[x,n]),o.jsx(v.Fragment,{children:v.cloneElement(t,y)})}function Ze(e={}){const{autoHideDuration:t=null,disableWindowBlurListener:s=!1,onClose:n,open:a,resumeHideDuration:d}=e,u=xe();v.useEffect(()=>{if(!a)return;function r(i){i.defaultPrevented||(i.key==="Escape"||i.key==="Esc")&&(n==null||n(i,"escapeKeyDown"))}return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[a,n]);const m=N((r,i)=>{n==null||n(r,i)}),p=N(r=>{!n||r==null||u.start(r,()=>{m(null,"timeout")})});v.useEffect(()=>(a&&p(t),u.clear),[a,t,p,u]);const h=r=>{n==null||n(r,"clickaway")},f=u.clear,x=v.useCallback(()=>{t!=null&&p(d??t*.5)},[t,d,p]),b=r=>i=>{const w=r.onBlur;w==null||w(i),x()},y=r=>i=>{const w=r.onFocus;w==null||w(i),f()},l=r=>i=>{const w=r.onMouseEnter;w==null||w(i),f()},c=r=>i=>{const w=r.onMouseLeave;w==null||w(i),x()};return v.useEffect(()=>{if(!s&&a)return window.addEventListener("focus",x),window.addEventListener("blur",f),()=>{window.removeEventListener("focus",x),window.removeEventListener("blur",f)}},[s,a,x,f]),{getRootProps:(r={})=>{const i=g({},X(e),X(r));return g({role:"presentation"},r,i,{onBlur:b(i),onFocus:y(i),onMouseEnter:l(i),onMouseLeave:c(i)})},onClickAway:h}}function qe(e){return F("MuiSnackbarContent",e)}W("MuiSnackbarContent",["root","message","action"]);const Ke=["action","className","message","role"],Ye=e=>{const{classes:t}=e;return H({root:["root"],action:["action"],message:["message"]},qe,t)},Qe=E(ne,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>{const t=e.palette.mode==="light"?.8:.98,s=ve(e.palette.background.default,t);return g({},e.typography.body2,{color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(s),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:s,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),Je=E("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),et=E("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),tt=v.forwardRef(function(t,s){const n=se({props:t,name:"MuiSnackbarContent"}),{action:a,className:d,message:u,role:m="alert"}=n,p=R(n,Ke),h=n,f=Ye(h);return o.jsxs(Qe,g({role:m,square:!0,elevation:6,className:oe(f.root,d),ownerState:h,ref:s},p,{children:[o.jsx(Je,{className:f.message,ownerState:h,children:u}),a?o.jsx(et,{className:f.action,ownerState:h,children:a}):null]}))}),nt=tt;function ot(e){return F("MuiSnackbar",e)}W("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const st=["onEnter","onExited"],rt=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],at=e=>{const{classes:t,anchorOrigin:s}=e,n={root:["root",`anchorOrigin${M(s.vertical)}${M(s.horizontal)}`]};return H(n,ot,t)},ee=E("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[`anchorOrigin${M(s.anchorOrigin.vertical)}${M(s.anchorOrigin.horizontal)}`]]}})(({theme:e,ownerState:t})=>{const s={left:"50%",right:"auto",transform:"translateX(-50%)"};return g({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},t.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},t.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},t.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[e.breakpoints.up("sm")]:g({},t.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},t.anchorOrigin.horizontal==="center"&&s,t.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},t.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),it=v.forwardRef(function(t,s){const n=se({props:t,name:"MuiSnackbar"}),a=re(),d={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{action:u,anchorOrigin:{vertical:m,horizontal:p}={vertical:"bottom",horizontal:"left"},autoHideDuration:h=null,children:f,className:x,ClickAwayListenerProps:b,ContentProps:y,disableWindowBlurListener:l=!1,message:c,open:C,TransitionComponent:r=we,transitionDuration:i=d,TransitionProps:{onEnter:w,onExited:S}={}}=n,j=R(n.TransitionProps,st),A=R(n,rt),P=g({},n,{anchorOrigin:{vertical:m,horizontal:p},autoHideDuration:h,disableWindowBlurListener:l,TransitionComponent:r,transitionDuration:i}),L=at(P),{getRootProps:z,onClickAway:D}=Ze(g({},P)),[le,U]=v.useState(!0),ce=Ce({elementType:ee,getSlotProps:z,externalForwardedProps:A,ownerState:P,additionalProps:{ref:s},className:[L.root,x]}),de=$=>{U(!0),S&&S($)},ue=($,pe)=>{U(!1),w&&w($,pe)};return!C&&le?null:o.jsx(Xe,g({onClickAway:D},b,{children:o.jsx(ee,g({},ce,{children:o.jsx(r,g({appear:!0,in:C,timeout:i,direction:m==="top"?"down":"up",onEnter:ue,onExited:de},j,{children:f||o.jsx(nt,g({message:c,action:u},y))}))}))}))}),lt=it,ct=({user:e,isMobile:t})=>{const s={"Full Name":e.name,"Email Address":e.email,"Your location":e.location?e.location:"location Not Set"};return o.jsx(_,{maxWidth:"lg",sx:{mt:4},children:o.jsxs(I,{sx:{backgroundColor:"background.lightGrey",padding:"1rem"},children:[o.jsx(k,{variant:"h5",fontWeight:"bold",children:"Profile Information"}),o.jsx(O,{container:!0,spacing:3,sx:{mt:2},children:Object.keys(s).map(n=>o.jsxs(O,{item:!0,xs:12,md:4,sx:{display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:"center"},children:[o.jsxs(I,{sx:{display:"flex",flexDirection:"column",gap:1,ml:t?0:"auto",mr:t?0:"auto"},children:[o.jsx(k,{variant:"body1",color:"primary.secondary",fontWeight:"bold",children:n}),o.jsx(k,{variant:"subtitle2",color:"text.secondary",fontWeight:"bold",children:s[n]})]}),Object.keys(s).indexOf(n)!==Object.keys(s).length-1&&o.jsx(ye,{orientation:t?"horizontal":"vertical",flexItem:!0,sx:{mt:t?2:0,mb:t?2:0,ml:t?0:"auto"}})]},n))})]})})},dt=()=>{const{user:e}=ae(),[t,s,n,a,d]=be(),[u,m]=v.useState({password:"",newPassword:""}),[p,h]=v.useState({open:!1,horizontal:"right",vertical:"bottom"}),[f,x,b]=Pe(u),y=c=>{b({});const{name:C,value:r}=c.target;m({...u,[C]:r})},l=c=>{if(c.preventDefault(),e.email==="demo"){b({password:"Password cannot be changed on a demo account"});return}if(x()){if(u.password===u.newPassword){b({password:"New password cannot be the same as the old password",newPassword:"New password cannot be the same as the old password"});return}d("https://api.gardenguardian.app:8443/"+"users/changePassword",u).then(r=>{if(r.status===401){b({password:r.message});return}r.status===200&&a(r.message),m({password:"",newPassword:""}),h({...p,open:!0})})}else console.log("Form is invalid")};return o.jsxs(_,{maxWidth:"lg",sx:{mt:4},children:[o.jsxs(I,{sx:{backgroundColor:"background.lightGrey",padding:"1rem"},children:[o.jsx(k,{variant:"h5",fontWeight:"bold",children:"Account Settings"}),o.jsx(O,{container:!0,spacing:3,sx:{mt:2},children:o.jsxs(O,{item:!0,xs:12,md:12,sx:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"},children:[o.jsx(k,{variant:"body2",color:"text.secondary",fontWeight:"bold",children:"Change Password"}),o.jsxs(I,{type:"form",component:"form",noValidate:!0,autoComplete:"false",sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",gap:"1rem",pt:2},onSubmit:l,children:[o.jsx(Z,{type:"password",name:"password",label:"Password",autoComplete:"off",value:u.password,onChange:y,placeholder:"Current Password",color:"primary",size:"small",variant:"outlined",sx:{backgroundColor:"background.lightGrey",width:{xs:"100%",sm:"300px"}},error:!!f.password,helperText:f.password}),o.jsx(Z,{type:"password",name:"newPassword",label:"New Password",value:u.newPassword,onChange:y,placeholder:"New Password",color:"primary",size:"small",variant:"outlined",sx:{backgroundColor:"background.lightGrey",width:{xs:"100%",md:"300px"}},error:!!f.newPassword,helperText:f.newPassword}),o.jsx(ie,{type:"submit",text:"Change Password"})]})]})})]}),o.jsx(lt,{anchorOrigin:{vertical:p.vertical,horizontal:p.horizontal},open:p.open,autoHideDuration:6e3,onClose:()=>h({...p,open:!1}),children:o.jsx(Ge,{onClose:()=>h({...p,open:!1}),severity:"success",variant:"filled",sx:{width:"100%"},children:s})})]})},ut=({device:e})=>{const{isDeviceActive:t}=Se(),[s,n]=v.useState(!1);return v.useEffect(()=>{(async()=>{const d=await t(e);n(d)})()},[e,t]),o.jsx(O,{item:!0,xs:10,sm:6,md:4,sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:o.jsxs(je,{variant:"light",sx:{p:2,borderRadius:4,width:"100%"},children:[o.jsx(k,{variant:"h6",fontWeight:"bold",children:e.deviceID}),o.jsxs(k,{variant:"body2",color:"grey",children:["Status:"," ",o.jsx(k,{component:"span",sx:{color:s?"green":"red"},children:s?"Online":"Offline"})]}),o.jsx(ie,{text:"Remove"})]})})},pt=({hasDevice:e,devices:t})=>o.jsx(_,{maxWidth:"lg",sx:{mt:4},children:o.jsxs(I,{sx:{padding:"1rem"},children:[o.jsx(k,{variant:"h5",fontWeight:"bold",children:"Linked Devices"}),e?o.jsx(O,{container:!0,spacing:2,sx:{mt:2,justifyContent:"center",alignItems:"center"},children:t.map(s=>o.jsx(ut,{device:s},s.deviceID))}):o.jsx(k,{variant:"body1",sx:{mt:2},children:"No devices linked"})]})}),bt=()=>{const e=re(),t=ke(e.breakpoints.down("md")),{user:s,hasDevice:n,devices:a}=ae();return o.jsxs(o.Fragment,{children:[o.jsx(ct,{user:s,isMobile:t}),o.jsx(dt,{user:s,isMobile:t}),o.jsx(pt,{hasDevice:n,devices:a})]})};export{bt as default};
