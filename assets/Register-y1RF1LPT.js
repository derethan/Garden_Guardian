import{j as a,B as n,T as i,u as c,a as v,e as p,o as w,c as y}from"./index-FUb6pSru.js";import{u as N}from"./useValidate-fuvunVkp.js";import{T as o}from"./TextField-00mNAEC9.js";import{L as C}from"./LoginLink-fkw8MBNh.js";import{a as P,C as T}from"./Container-p3XFkknc.js";import{B as k}from"./Button-zQFS95Ph.js";import{L as F}from"./LandingSiteNav--wXBcTF8.js";import"./Select-1tYmCoU6.js";const L=({formData:t,formErrors:e,handleChange:s})=>a.jsx(a.Fragment,{children:a.jsxs(n,{sx:{display:"flex",flexDirection:"column",gap:2,padding:2},children:[a.jsx(o,{required:!0,label:"First Name",name:"firstName",id:"firstName",variant:"outlined",size:"small",sx:{backgroundColor:"background.default"},value:t.firstName,onChange:s,error:!!e.firstName,helperText:e.firstName}),a.jsx(o,{required:!0,label:"Last Name",name:"lastName",id:"lastName",variant:"outlined",size:"small",sx:{backgroundColor:"background.default"},value:t.lastName,onChange:s,error:!!e.lastName,helperText:e.lastName}),a.jsx(o,{label:"Email",type:"email",name:"email",id:"email",variant:"outlined",size:"small",sx:{backgroundColor:"background.default"},value:t.email,onChange:s,error:!!e.email,helperText:e.email})]})}),R=({formData:t,formErrors:e,handleChange:s})=>a.jsxs(a.Fragment,{children:[a.jsx(i,{variant:"subtitle1",color:"text.card",children:"Password Details"}),a.jsxs(n,{sx:{display:"flex",gap:2,padding:2},children:[a.jsx(o,{label:"Password",type:"password",name:"password",id:"password",variant:"outlined",size:"small",sx:{backgroundColor:"background.default"},value:t.password,onChange:s,error:!!e.password,helperText:e.password}),a.jsx(o,{label:"Confirm Password",type:"password",name:"confirmPassword",id:"confirmPassword",variant:"outlined",size:"small",sx:{backgroundColor:"background.default"},value:t.confirmPassword,onChange:s,error:!!e.confirmPassword,helperText:e.confirmPassword})]})]}),z=()=>{const t=c(),e=v(),[s,l]=p.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),[d,x]=N(s),[g,f,,h,j]=w(),m=r=>{l({...s,[r.target.name]:r.target.value}),r.target.name==="email"&&h("")},b=async r=>{if(r.preventDefault(),x()){const u=await j("https://api.gardenguardian.app:8443/"+"users/register",s);u&&(console.log("register status: ",u),l({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),t("/login"))}else console.log("Form is invalid")};return a.jsxs(P,{variant:"light",sx:{padding:2,margin:2},children:[a.jsx(i,{variant:"h4",color:e.typography.primary.cardTitle,sx:{fontWeight:600},children:"Create Account"}),a.jsx(i,{variant:"subtitle2",color:e.typography.primary.subtitle,sx:{paddingTop:"8px"},children:"Enter your details to create an account"}),a.jsxs(n,{component:"form",noValidate:!0,autoComplete:"off",onSubmit:b,children:[a.jsx(L,{formData:s,formErrors:d,handleChange:m}),g===409&&a.jsx(i,{variant:"body1",color:"error",children:f}),a.jsx(R,{formData:s,formErrors:d,handleChange:m}),a.jsx(n,{children:a.jsx(k,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",sx:{mt:3,mb:2},children:"Register Account"})}),a.jsx(C,{})]})]})},S=z;function $(){const t=y(),e=c();return p.useEffect(()=>{t.isLoggedIn&&e("/dashboard")},[]),a.jsxs(a.Fragment,{children:[" ",a.jsx(F,{}),a.jsx(T,{maxWidth:"sm",sx:{paddingTop:4},children:a.jsx(S,{})})]})}export{$ as default};
